<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>R3cked Games 2.0</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    /* Page basics and theme variables */
    :root{
      --rainbow-speed: 7s;
      --rainbow-opacity: 0.85;

      /* bigger tiles */
      --tile-gap: 14px;
      --tile-min: 300px;   /* big tiles */
      --tile-max: 420px;
      --tile-radius: 12px;
      --tile-border: rgba(255,255,255,0.06);

      /* page colors (defaults = dark) */
      --bg-base: linear-gradient(135deg,#0b0f16 0%, #11141a 100%);
      --text-color: #e8eef8;
      --card-bg: rgba(255,255,255,0.03);
      --accent: #79aadb;
      --btn-gradient: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.12));
    }

    /* Light theme */
    html[data-theme="light"] {
      --bg-base: linear-gradient(135deg,#f4f6fb 0%, #e9eefb 100%);
      --text-color: #0b1220;
      --card-bg: #ffffffcc;
      --accent: #2563eb;
      --btn-gradient: linear-gradient(180deg,#ffffff,#f0f6ff);
    }

    /* other themes */
    html[data-theme="neon"] { --bg-base: linear-gradient(90deg,#0a0010,#1a0020); --text-color: #fff; --card-bg: rgba(255,255,255,0.03); --accent: #ff00de; --btn-gradient: linear-gradient(90deg,#ff0080,#00ffff); }
    html[data-theme="ocean"] { --bg-base: linear-gradient(180deg,#012a4a,#014f86); --text-color: #e6f7ff; --card-bg: rgba(255,255,255,0.03); --accent: #00b4d8; --btn-gradient: linear-gradient(90deg,#00b4d8,#0077b6); }
    html[data-theme="sunset"] { --bg-base: linear-gradient(180deg,#ff7e5f,#feb47b); --text-color: #141414; --card-bg: rgba(0,0,0,0.06); --accent: #ff5f6d; --btn-gradient: linear-gradient(90deg,#ff7e5f,#ffb199); }
    html[data-theme="forest"] { --bg-base: linear-gradient(180deg,#022c22,#055a4f); --text-color: #e6ffe9; --card-bg: rgba(255,255,255,0.02); --accent: #2dd4bf; --btn-gradient: linear-gradient(90deg,#2dd4bf,#0ea5a3); }
    html[data-theme="pastel"] { --bg-base: linear-gradient(180deg,#fdf6ff,#f6fbff); --text-color: #2b2b2b; --card-bg: rgba(255,255,255,0.9); --accent: #f0abfc; --btn-gradient: linear-gradient(90deg,#ffd1dc,#cfe9ff); }
    html[data-theme="retro"] { --bg-base: linear-gradient(180deg,#2b021f,#3b0a3a); --text-color: #ffe8a1; --card-bg: rgba(0,0,0,0.06); --accent: #ffb86b; --btn-gradient: linear-gradient(90deg,#ffb86b,#ffd36b); }
    html[data-theme="cyber"] { --bg-base: linear-gradient(180deg,#001219,#001e2b); --text-color: #8affff; --card-bg: rgba(0,0,0,0.06); --accent: #00ffd5; --btn-gradient: linear-gradient(90deg,#00ffd5,#00a3ff); }
    html[data-theme="matrix"] { --bg-base: linear-gradient(180deg,#001100,#002200); --text-color: #7aff7a; --card-bg: rgba(0,0,0,0.06); --accent: #00ff00; --btn-gradient: linear-gradient(90deg,#00ff00,#006600); }
    html[data-theme="solar"] { --bg-base: linear-gradient(180deg,#fff1cc,#ffe6a7); --text-color: #241f1f; --card-bg: rgba(255,255,255,0.95); --accent: #ff8c42; --btn-gradient: linear-gradient(90deg,#ffd27f,#ff8c42); }

    /* Base layout uses theme vars */
    html,body{
      height:100%;
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      color: var(--text-color);
      background: var(--bg-base);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* animated rainbow overlay */
    @keyframes rainbowMove {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    body::before{
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
      background: linear-gradient(
        90deg,
        #ff0080 0%,
        #ff8c00 14%,
        #ffff00 28%,
        #00ff00 42%,
        #00ffff 56%,
        #0000ff 70%,
        #8000ff 84%,
        #ff0080 100%
      );
      background-size: 200% 200%;
      animation: rainbowMove var(--rainbow-speed) linear infinite;
      mix-blend-mode: overlay;
      opacity: var(--rainbow-opacity);
    }

    /* fixed header + search */
    .site-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10010;
      display:flex;
      align-items:center;
      justify-content:space-between;
      height:72px;
      padding:12px 18px;
      background: rgba(0,0,0,0.24);
      backdrop-filter: blur(6px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.18);
      gap:12px;
    }
    .site-header h1 { margin:0; font-size:20px; color:var(--text-color); letter-spacing:0.6px; }

    .search-bar {
      width: 420px;
      max-width: 48%;
      min-width: 180px;
      display:flex;
      gap:8px;
      align-items:center;
    }
    .search-bar input {
      width: 100%;
      padding:10px 12px;
      border-radius: 10px;
      border:1px solid rgba(255,255,255,0.08);
      background: var(--card-bg);
      color: var(--text-color);
      font-weight:700;
      outline: none;
    }
    .search-bar button {
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.08);
      background: var(--card-bg);
      color: var(--text-color);
      cursor:pointer;
      font-weight:700;
    }

    .main-content {
      max-width: 1200px;
      margin: 18px auto;
      padding: 12px;
      box-sizing: border-box;
      padding-top: 100px;
    }

    .buttons-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(var(--tile-min), 1fr));
      gap: var(--tile-gap);
      align-items: start;
      align-content: start;
    }

    /* tile/button */
    .tile {
      position: relative;
      background: var(--card-bg);
      border-radius: var(--tile-radius);
      border: 1px solid var(--tile-border);
      padding: 6px;
      display:flex;
      align-items:center;
      justify-content:center;
      height: 220px;
      box-sizing: border-box;
      cursor: pointer;
      overflow: hidden;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .tile:hover { transform: translateY(-6px); box-shadow: 0 18px 36px rgba(0,0,0,0.28); }

    /* content inside tile when no images: big label */
    .tile .label {
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:6px;
      width:100%;
      padding:12px;
    }
    .tile .title {
      font-size: 22px;
      font-weight: 900;
      text-align: center;
      word-break: break-word;
      color: var(--text-color);
    }

    .toolbar {
      position: fixed;
      right: 16px;
      top: 88px;
      display:flex;
      gap:8px;
      z-index: 10010;
      align-items:center;
      backdrop-filter: blur(4px);
    }
    .toolbar .pill { background: var(--card-bg); padding: 8px 10px; border-radius: 999px; font-weight: 700; min-width: 68px; text-align: center; color: var(--text-color); }
    .toolbar select { background: var(--card-bg); color: var(--text-color); border-radius: 8px; padding: 6px 8px; border: 1px solid rgba(255,255,255,0.06); font-weight:700; }

    @media (max-width: 720px) {
      :root { --tile-min: 160px; }
      .site-header { height:64px; padding: 8px; }
      .main-content { padding-top: 88px; }
      .toolbar { top: 78px; right: 8px; }
      .tile { height: 160px; }
      .tile .title { font-size: 16px; }
      .search-bar { max-width: 55%; }
    }
  </style>
</head>
<body data-theme="dark">
  <div class="site-header" role="banner" aria-label="Site header">
    <h1>R3cked Games V2</h1>

    <!-- Search bar: filters by game name only -->
    <div class="search-bar" role="search" aria-label="Search games">
      <input id="searchBar" type="search" placeholder="Search games..." aria-label="Search games">
      <button id="clearSearch" title="Clear search">Clear</button>
    </div>
  </div>

  <div class="main-content" role="main">
    <div id="sections-container"></div>
  </div>

  <div class="toolbar" id="toolbar" aria-hidden="false">
    <div class="pill" id="mini-clock">--:--:--</div>
    <div class="pill" id="site-counter">Visits: --</div>
    <div class="pill" id="battery-info">Battery: --</div>

    <div style="display:flex;align-items:center;gap:6px;">
      <label for="themeSelect" style="font-weight:700; margin-right:6px; color:var(--text-color);">Theme</label>
      <select id="themeSelect" aria-label="Theme selector"></select>
    </div>
  </div>

  <script>
    // files list (kept)
    const files = [
      'cl1','cl10bullets','cl10minutestildawn','cl12minibattles','cl1on1soccer','cl1v1lol','cl1v1tennis','cl2048','cl2048cupcakes','cl2doom','cl2Dshooting','cl3dash','cl3pandas','cl3pandasbrazil','cl3pandasfantasy','cl3pandasjapan','cl3pandasnight','cl3slices2','cl40xescape','cl4thandgoal','cl500calibercontractz','cl60secondsburgerrun','cl60secondssantarun','cl8ballclassic','cl8ballpool','cl9007199254740992','cl99balls','cl99nightsitf','clabandoned3','clabsolutemadness','clacecombat2','clacecombat3','clacegangstertaxi','clachievementunlocked','clachievmentunlocked','clachievmentunlocked2','clachievmentunlocked3','clachillies','clachillies2','clADarkRoom','cladayintheoffice','clADOFAI','cladvancewars','cladvancewars2','cladventneon','clAdventureCapatalist','cladventurecapitalist','clagariolite','clageofwar','clageofwar2','clagesofconflict','clahoysurvival','clai','clakoopasrevenge','clakoopasrevenge2','clakumanorgaiden','clalienhominid','clalienhominidgba','clalienskyinvasion','clalientransporter','clalienvspredator','clallbossesin1','clallocation','clamaze','clamidstthesky','clamigopancho','clamigopancho2','clamigopancho3','clamigopancho4','clamigopancho5','clamigopancho6','clamigopancho7','clamongus','clamorphous','clancientsins','clangry-birdsspace','clangrybirds-space','clangrybirds','clangrybirdsshowdown','clangrybirdsspace','clanimalcrossingwildworld','clanotherworld','clapotris','clappleshooter','clappleworm','claquaparkio','clarceuslegend','clarcheryworldtour','clarena','clarmormayhem2','clarsonate','clascent','clasmallworldcup','classesmentexaminationque','clasteroids','clasteroidsALT','clattackhole','clavalanche','claviamasters','claviamastersbuggy','clAwesomePirates','clawesomeplanes','clawesometanks','clawesometanks2','clB3313','clbabeltower','clbabychiccoadventure','clbabykaizo','clbabysniperinvietnam','clbackrooms','clbackrooms2D','clbackyardbaseball','clbackyardbaseball09','clbackyardbaseball10','clbackyardsoccer','clbaconmaydie','clbadbodyguards','clbadicecream','clbadmondaysimulator','clbadparenting','clbadpiggies','clbadtimesim','clbadtimesimulator','clbaldidecomp','clbaldisbasics','clbaldisbasicsremaster','clbaldisfunnewschoolultimate','clballblast','clballsandbricks','clballsandbricksgood','clbananasimulator','clbanditgunslingers','clbanjokazooie','clbanjotooie','clbankbreakout2','clbankrobbery2','clbarryhasasecret','clbas','clbaseballbros','clbasketballfrvr','clbasketballlegends','clbasketballstars','clbasketbattle','clbasketbros','clbasketrandom','clbasketrandomgood','clbasketslamdunk2','clbatterup','clbattlekarts','clbattles','clbattlesim','clbattlezone','clbazookaboy','clbballlegend','clbeachboxingsim','clbeamrider','clbearbarians','clbearsus','clben10alienforce','clben10omniverse','clben10protector','clben10racing','clben10ultimatealien','clbergentruck201x','clbfdia5b','clbigicetowertinysquare','clbigneontowertinysquare','clbigshotboxing2','clbigtowertinysquare','clbigtowertinysquare2','clbigtowertinysquare2good','clBig_Time_Butter_Baron','clbindingofisaccsheeptime','clbioevil4','clbitlife','clbitlifeencrypted','clbitplanes','clblackjack','clblackjackbattle','clblackjackhhhh','clblacksmithlab','clblastronaut','clblazedrifter','clbleachvsnaruto','clblightborne','clblobsstory2','clblockblast','clblockcraftparkour','clblockcraftshooter','clblockpost','clblockthepig','clblockydemolitionderby','clblockysnakes','clbloodmoney','clbloodtournament','clbloons','clbloons2','clbloonspp1','clbloonspp2','clbloonspp3','clbloonspp4','clbloonspp5','clbloonsTD1','clbloonsTD2','clbloonsTD3','clbloonsTD4','clbloonsTD5','clbloonsTD6scratch','clbloxorz','clblumgiracers','clBMX2','clbntts','clbobtherobber','clbobtherobber2','clbobtherobber5','clbollybeat','clbomberman','clbomberman2','clbombermanhero','clboomslingers','clbottlecracks','clbottleflip3d','clbounceback','clbouncemasters','clbouncymotors','clBountyOfOne','clbowlalt','clboxhead2playrooms','clboxheadnightmare','clboxinglive-2','clboxinglive2','clboxingrandom','clbrainrot','clbridgerace','clBTD1','clbtd5','clbtts','clbtts2','clbubbleshooter','clbubbleshooterpirate','clbubbletanks','clbubbletanks2','clbubbletanks3','clbubbletanksarenas','clbubbletankstd','clbubsy','clbuckshotroulette','clbuildnowgg','clbunnyland','clburgerandfrights','clburritobison','clburritobison2','clburritobisonlaunchalibre','clburritobisonrevenge','clbushidoblade','clcactusmccoy','clcactusmccoy2','clcannonballs3d','clcannonfodder','clcapybaraclicker','clcarcrash3','clcardrawing','clcareatscar2deluxe','clcarkingarena','clcarmods','clcarstuntsdriving','clCartoonNetworkTableTennisUltimateTournament','clcastlebloodline','clcastlecircleofmoon','clcastlevania','clcastlevania2','clcastlevania3','clcastlevaniaariaofsorrow','clcastlevaniadawnofsorrow','clcastlevanianes','clcastlewarsmodern','clcatmario','clcatmariogood','clcatslovecake2','clcavestory','clceleste','clceleste2','clcellardoor','clchaosfaction2','clcheckers','clcheesechompers3d','clcheshireinachatroom','clchess','clchessclassic','clchibiknight','clchickenscream','clchickenwar','clchipschallenge','clchoppyorc','clchronotrigger','clchuzzle','clCircloO2','clciviballs','clciviballs2','clclashofvikings','clclassof09','clcleanupio','clclearvision','clclearvision2','clclearvision3','clclearvision4','clclearvision5','clclmadnessambulation','clclubbytheseal','clclusterrush','clcoalllcdemo','clcod4','clcodblackopp','clcoddefiance','clcodenamegordon','clcodmodernwarfare','clcodworldatwar','clcoffeemaker','clcolorburst3d','clcolormatch','clcolorwatersort3d','clcombopool','clcommanderkeen4','clcommanderkeen5','clcommanderkeen6','clconkersbadfurday','clcontra','clcontra3','clcookie-clicker','clcookieclicker','clcookieclickercool','clcookieclickergood','clcookingmama','clcookingmama2','clcookingmama3','clcoreball','clcotlk','clcountmastersstickmangames','clcoverorange','clcoverorange2','clcoverorangejourneygangsters','clcoverorangejourneyknights','clcoverorangejourneypirates','clcoverorangejourneyspace','clcoverorangeplayerspack','clcoverorangeplayerspack2','clcoverorangeplayerspack3','clcrankit!','clcrashbandicoot','clcrashbandicoot2','clcrashteamracing','clcrazycars','clcrazycattle3d','clcrazychicken3D','clcrazyfrogracer','clcrazymotorcycle','clcreeperworld2','clcrossyroad','clcrunchball3000','clcs1.6','clcsds','clcsgoclicker','clctgpnitro','clcurveball','clcuttherope','clcuttheropetimetravel','clcyberbungracing','clcybersensation','cldadgame','cldadnme','cldaggerfall','cldanktomb','cldborigins','cldborigins2','cldbsniper','cldbzattacksaiyans','cldbzdevolution','cldbzsuperwarriorssonic','cldeadestate','cldeadlydescent','cldeadplate','cldeadzed','cldeadzed2','cldeathchase','cldeblob2','cldecision','cldecision2','cldecision3','cldecisionmedieval','cldeepersleep','cldeepestsword','cldeepsleep','cldefendyourcastle','cldefendyournuts','cldefendyournuts2','cldeltarune','cldeltatraveler','cldementium','cldemolitionderbycrashracing','cldiablo','cldiamondhollow','cldiamondhollow2','cldiddykong-racing','cldieinthedungeon','cldigdeep','cldigdug','cldigdug2','cldigdug26','cldigtochina','cldinodudes','cldiredecks','cldoblox','cldogeminer','cldogeminer2','cldokidokiliteratureclub','cldonkeykong','cldonkeykong64','cldonkeykongcountry','cldonkeykongcountry2','cldonkeykongcountry3','cldonkeykongnes','cldontescape','cldontescape2','cldontescape3','cldoodlejump','cldoodlejumpgoober','cldoom','cldoom2','cldoom2d','cldoom2dDOS','cldoom3pack','cldoom64','cldoomdos','cldoomemscripten','cldoomps','cldoompsalt','cldoomzio','cldouchebaglife','cldouchebagworkout','cldownthemountain','cldragonballadvance','clDragonBallZTheLegacyofGoku','clDragonQuestIX','cldrawclimber','cldrawtheline','cldreader','cldreadheadparkour','cldriftboss','cldrifthuntersmerge','cldrivemady','cldrivenwild','cldrmario','cldrweedgaster','cldubstep','clduckhunt','clducklfe5','clducklife','clducklife2','clducklife3','clducklife4','clducklifebattle','clducklifespace','clducklingsio','clducktales','cldud','cldukenukem3d','cldumpling','cldungeondeck','cldungeonraid','cldungeonsanddegenerategamblers','cldunkshot','clduskchild','cldyingdreams','cldynamiteheaddy','cleagleride','clearntodie','clearntodie2','clearthbound','clearthbound3','clearthboundsnes','clearthtaken','clearthtaken2','clearthtaken3','clearthwormjim','clearthwormjim2','cledelweiss','cledyscarsimulator','cleffinghail','cleffingmachines','cleffingworms','cleffingzombies','clegg','cleggycar','clelasticface','clelectricman2','clemujs','clenchain','clendlesswar4','clendlesswar5','clendlesswar5wow','clendlesswar7','clenduro','clepicbattlefantasy5','clescalatingduel','clescaperoad-2','clescaperoad','clet','cletrianoddyssey','clevilglitch','clevolution','clexcitebike64','clextremerun3d','clfactoryballs','clfactoryballs2','clfactoryballs3','clfactoryballs4','clfairytalevsonepiece','clfallout','clfamidash','clfancypantsadventure','clfancypantsadventure2','clfancypantsadventure3','clfancysnowboarding','clfashionbattle','clfattygenius','clfearstofathomhomealone','clfeedus','clfeedus2','clfeedus3','clfeedus4','clfeedus5','clFF3','clff6','clffmysticquest','clFFsonic1','clFFsonic2','clFFsonic3','clFFsonic4','clFFsonic5','clFFsonic61','clFFsonic62','clFIFA07','clFIFA10','clFIFA11','clFIFA2000(1)','clfifa2000','clFIFA99','clFIFAinternationalsoccer','clFIFAroadtoworldcup98','clFIFAsoccer06','clFIFAsoccer95','clFIFAsoccer96','clFIFAsoccer97','clFIFAstreet2','clfinalearth2','clfinalfantasy','clfinalfantasyII','clfinalfantasytactics','clfinalfantasyVI','clfinalfantasyVII','clfinalfantasyVIId2','clfinalfantasyVIId3','clfinalfantasyVIItheothertetrr','clfinalninja','clfireblob','clfireboyandwatergirl','clfireboyandwatergirl2','clfireboyandwatergirl3','clfireboyandwatergirl5','clfireboyandwatergirl6','clfireemblem','clfisheatgettingbig','clfisquarium','clfivenightsatbaldisredone','clfivenightsatshrekshotel','clflashsonic','clfloodrunner','clfloodrunner2','clfloodrunner4','clfluidism','clfnac1','clfnac2','clFNAF','clFNAF2','clFNAF3','clFNAF4','clfnaf4halloween','clfnafanimatronics','clfnafps','clfnaf',
    ];

    function displayName(filename){
      if (!filename) return filename;
      if (filename.length >= 2 && filename.slice(0,2).toLowerCase() === 'cl') {
        return filename.slice(2);
      }
      return filename;
    }

    // Create and store references to tiles so filtering is instant
    let tilesContainerEl = null;
    const tileElements = []; // {el, nameLower}

    function generateAllTiles() {
      const container = document.getElementById('sections-container');
      container.innerHTML = '';
      tilesContainerEl = document.createElement('div');
      tilesContainerEl.className = 'buttons-container';
      tileElements.length = 0;

      files.forEach(file => {
        const tile = document.createElement('button');
        tile.className = 'tile';
        tile.type = 'button';
        const name = displayName(file) || file;
        tile.title = name;
        tile.dataset.source = file;
        tile.dataset.name = name;

        // label container (only the game name)
        const label = document.createElement('div');
        label.className = 'label';

        const title = document.createElement('div');
        title.className = 'title';
        // show short name (truncate if too long)
        title.textContent = name.length > 28 ? name.slice(0,28) + '…' : name;
        label.appendChild(title);

        tile.appendChild(label);

        // subtle per-name background
        tile.style.background = bgForName(name);

        tile.addEventListener('click', async (e) => {
          e.stopPropagation();
          const source = tile.dataset.source;
          const normalized = (source.includes('.') && source.lastIndexOf('.')>0) ? source : source + '.html';
          const encoded = encodeURIComponent(normalized);
          try {
            const res = await fetch(`https://cdn.jsdelivr.net/gh/mishrsan002-star/shd/UGS-Files/${encoded}?t=${Date.now()}`);
            if (!res.ok) throw new Error('Could not load game');
            const text = await res.text();
            const newWin = window.open("about:blank","_blank");
            if (newWin) {
              newWin.document.open();
              newWin.document.write(text);
              newWin.document.close();
            } else {
              const blob = new Blob([text], {type: 'text/html'});
              const a = document.createElement('a');
              a.href = URL.createObjectURL(blob);
              a.download = displayName(source) + '.html';
              document.body.appendChild(a);
              a.click();
              a.remove();
              URL.revokeObjectURL(a.href);
            }
          } catch (err) {
            alert('Failed to load file: ' + err);
          }
        });

        tilesContainerEl.appendChild(tile);
        tileElements.push({ el: tile, nameLower: name.toLowerCase() });
      });

      container.appendChild(tilesContainerEl);
    }

    // search/filter logic
    const searchBar = document.getElementById('searchBar');
    const clearBtn = document.getElementById('clearSearch');

    function filterTiles() {
      const q = (searchBar.value || '').trim().toLowerCase();
      if (!tilesContainerEl) return;
      if (!q) {
        tileElements.forEach(t => t.el.style.display = '');
        return;
      }
      tileElements.forEach(t => {
        const visible = t.nameLower.includes(q);
        t.el.style.display = visible ? '' : 'none';
      });
    }

    searchBar.addEventListener('input', filterTiles);
    clearBtn.addEventListener('click', () => { searchBar.value = ''; filterTiles(); searchBar.focus(); });

    // utility: deterministic background for name
    function bgForName(name) {
      let hash = 0;
      for (let i=0;i<name.length;i++) hash = (hash<<5) - hash + name.charCodeAt(i);
      const h = Math.abs(hash) % 360;
      return `linear-gradient(135deg, hsla(${h},70%,55%,0.10), hsla(${(h+40)%360},60%,35%,0.08))`;
    }

    /* 12-hour clock */
    const clockEl = document.getElementById('mini-clock');
    function updateClock12() {
      const d = new Date();
      let hours = d.getHours();
      const minutes = d.getMinutes();
      const seconds = d.getSeconds();
      const ampm = hours >= 12 ? 'PM' : 'AM';
      hours = hours % 12;
      if (hours === 0) hours = 12;
      const hh = String(hours).padStart(2, '0');
      const mm = String(minutes).padStart(2, '0');
      const ss = String(seconds).padStart(2, '0');
      clockEl.textContent = `${hh}:${mm}:${ss} ${ampm}`;
    }
    setInterval(updateClock12, 1000);
    updateClock12();

    /* Site counter (per-browser) */
    const siteCounterEl = document.getElementById('site-counter');
    const SITE_KEY = 'r3cked_visitors_unique_v1';
    const SITE_TOTAL_KEY = 'r3cked_visitors_total_v1';
    function updateSiteCounter() {
      try {
        const hasVisited = localStorage.getItem(SITE_KEY);
        let total = parseInt(localStorage.getItem(SITE_TOTAL_KEY) || '0', 10) || 0;
        if (!hasVisited) {
          localStorage.setItem(SITE_KEY, Date.now().toString());
          total = total + 1;
          localStorage.setItem(SITE_TOTAL_KEY, String(total));
        }
        siteCounterEl.textContent = `Visitors: ${total}`;
      } catch (e) {
        const t = sessionStorage.getItem('r3cked_session_visits') || '0';
        const n = parseInt(t,10) + 1;
        sessionStorage.setItem('r3cked_session_visits', String(n));
        siteCounterEl.textContent = `Visits (session): ${n}`;
      }
    }
    updateSiteCounter();

    /* Battery info */
    const batteryEl = document.getElementById('battery-info');
    function updateBatteryDisplay(level, charging) {
      const pct = Math.round(level * 100) + '%';
      const status = charging ? '⚡' : '';
      batteryEl.textContent = `Battery: ${pct} ${status}`;
    }
    if ('getBattery' in navigator) {
      navigator.getBattery().then(battery => {
        updateBatteryDisplay(battery.level, battery.charging);
        battery.addEventListener('levelchange', () => updateBatteryDisplay(battery.level, battery.charging));
        battery.addEventListener('chargingchange', () => updateBatteryDisplay(battery.level, battery.charging));
      }).catch(() => { batteryEl.textContent = 'Battery: n/a'; });
    } else {
      batteryEl.textContent = 'Battery: n/a';
    }

    /* Themes: populate selector + persist */
    const themes = [
      {id:'dark', label:'Dark'},
      {id:'light', label:'Light'},
      {id:'neon', label:'Neon'},
      {id:'ocean', label:'Ocean'},
      {id:'sunset', label:'Sunset'},
      {id:'forest', label:'Forest'},
      {id:'pastel', label:'Pastel'},
      {id:'retro', label:'Retro'},
      {id:'cyber', label:'Cyber'},
      {id:'matrix', label:'Matrix'},
      {id:'solar', label:'Solar'}
    ];
    const themeSelect = document.getElementById('themeSelect');
    function populateThemes() {
      themes.forEach(t => {
        const opt = document.createElement('option');
        opt.value = t.id;
        opt.textContent = t.label;
        themeSelect.appendChild(opt);
      });
    }
    populateThemes();

    const THEME_KEY = 'r3cked_site_theme_v1';
    function applyTheme(id, save = true) {
      document.documentElement.setAttribute('data-theme', id);
      if (save) localStorage.setItem(THEME_KEY, id);
      if (id === 'neon') document.body.style.setProperty('--rainbow-opacity','0.55');
      else if (id === 'pastel' || id === 'light' || id === 'solar') document.body.style.setProperty('--rainbow-opacity','0.15');
      else document.body.style.setProperty('--rainbow-opacity','0.85');
    }
    const saved = localStorage.getItem(THEME_KEY) || 'dark';
    themeSelect.value = saved;
    applyTheme(saved, false);
    themeSelect.addEventListener('change', () => applyTheme(themeSelect.value, true));

    // prevent casual view-source (mild)
    (function softBlock(){
      document.addEventListener('contextmenu', e => {});
    })();

    // init
    window.addEventListener('DOMContentLoaded', () => {
      generateAllTiles();
      // set initial theme selection
      const cur = document.documentElement.getAttribute('data-theme') || 'dark';
      themeSelect.value = cur;
      // wire search focus on load
      searchBar.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') { searchBar.value = ''; filterTiles(); }
      });
    });
  </script>
</body>
</html>
